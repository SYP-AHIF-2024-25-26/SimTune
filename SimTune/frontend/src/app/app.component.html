<div class="flex justify-between items-center p-2 bg-costumGray drop-shadow-md">
  <!-- Logo und SimTune - immer sichtbar -->
  <div class="flex items-center space-x-2 ml-2 md:ml-5">
    <a routerLink="/homepage" class="flex items-center space-x-2">
      <img src="/assets/images/Logo.png" class="h-8 md:h-10 w-auto">
      <span class="text-lg font-semibold">SimTune</span>
    </a>

    <!-- Volume-Regler - nur auf Desktop sichtbar -->
    <div class="hidden md:flex items-center space-x-2 ml-16">
      <img src="/assets/images/Volume.png" class="h-7 w-auto" (click)="noSound()">
      <input type="range" id="volume" min="0" max="100" [(ngModel)]="volume"
        (click)="adjustVolume()"
        class="w-40 h-2 rounded-full appearance-none cursor-pointer transition-all duration-200 bg-blue-300"/>
    </div>
  </div>

  <!-- Rechte Seite - Desktop Layout -->
  <div class="hidden md:flex items-center space-x-2 mr-5">
    @if (!isLoggedIn()) {
      <a routerLink="/login" class="bg-costumBlue text-white p-1 px-4 rounded-3xl mr-5 text-lg hover:bg-blue-600">Anmelden</a>
      <a routerLink="/register" class="bg-costumBlue text-white p-1 px-4 rounded-3xl mr-10 text-lg hover:bg-blue-600">Konto erstellen</a>
    } @else {
      <span class="bg-white text-gray-600 text-sm px-3 py-1 rounded-full border shadow-sm">
        Rolle: {{ getRoleFromJwt() || 'Unbekannt' }}
      </span>
      <a routerLink="/profile-page" class="p-1 px-4 rounded-3xl">
        <img src="/assets/images/ProfilePage.png" class="h-9 w-auto">
      </a>
    }
  </div>

  <!-- Mobile Layout - Nur Benutzerprofil mit Dropdown -->
  <div class="md:hidden relative mr-2" style="z-index: 10000;">
    <button (click)="toggleMobileDropdown()" class="p-2 rounded-full">
      <img src="/assets/images/ProfilePage.png" class="h-8 w-auto">
    </button>

    @if (showMobileDropdown) {
      <div class="absolute right-0 top-full mt-2 w-48 bg-white rounded-lg shadow-lg border mobile-dropdown" style="z-index: 10001;">
        @if (!isLoggedIn()) {
          <a routerLink="/login" (click)="closeMobileDropdown()" class="block px-4 py-3 text-gray-700 hover:bg-gray-100 border-b">
            Anmelden
          </a>
          <a routerLink="/register" (click)="closeMobileDropdown()" class="block px-4 py-3 text-gray-700 hover:bg-gray-100">
            Konto erstellen
          </a>
        } @else {
          <div class="px-4 py-3 border-b">
            <span class="text-sm text-gray-600">
              Rolle: {{ getRoleFromJwt() || 'Unbekannt' }}
            </span>
          </div>
          <a routerLink="/profile-page" (click)="closeMobileDropdown()" class="block px-4 py-3 text-gray-700 hover:bg-gray-100">
            Profil
          </a>
        }
      </div>
    }
  </div>
</div>

<router-outlet />
