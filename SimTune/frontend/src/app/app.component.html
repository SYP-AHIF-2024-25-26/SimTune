<div class="flex justify-between items-center p-2 bg-costumGray drop-shadow-md relative" style="z-index: 10;">
  <!-- Logo und SimTune - links -->
  <div class="flex items-center space-x-2 ml-2 md:ml-5">
    <a routerLink="/homepage" class="flex items-center space-x-2">
      <img src="/assets/images/Logo.png" class="h-8 md:h-10 w-auto">
      <span class="text-lg font-semibold">SimTune</span>
    </a>

    <!-- Vertikaler Trennstrich -->
    <div class="hidden md:block h-8 w-px bg-gray-400 mx-6"></div>

    <!-- Navigation Links - neben dem Logo -->
    <div class="hidden md:flex items-center space-x-6">
      <a routerLink="/uebungen" class="text-base hover:font-semibold">Übungen</a>
      <a routerLink="/pruefungen" class="text-base hover:font-semibold">Prüfungssimulationen</a>
    </div>
  </div>

  <!-- Rechte Seite - Desktop Layout -->
  <div class="hidden md:flex items-center space-x-2 mr-5 relative">
    @if (!isLoggedIn()) {
      <button (click)="toggleDesktopDropdown()" class="p-1 px-4 rounded-3xl relative" style="z-index: 11;">
        <img src="/assets/images/ProfilePage.png" class="h-9 w-auto">
      </button>

      @if (showDesktopDropdown) {
        <div class="absolute right-0 top-full mt-2 w-64 bg-white rounded-lg shadow-lg border" style="z-index: 10000;">
          <!-- Volume-Regler im Dropdown -->
          <div class="px-4 py-3 border-b">
            <div class="flex items-center space-x-2">
              <img src="/assets/images/Volume.png" class="h-6 w-auto cursor-pointer" (click)="noSound()">
              <input type="range" id="volume" min="0" max="100" [(ngModel)]="volume"
                (input)="adjustVolume()"
                class="flex-1 h-2 rounded-full appearance-none cursor-pointer transition-all duration-200 bg-blue-300"/>
              <span class="text-sm text-gray-600 w-8">{{volume}}</span>
            </div>
          </div>
          <a routerLink="/login" (click)="closeDesktopDropdown()" class="block px-4 py-3 text-gray-700 hover:bg-gray-100 border-b">
            Anmelden
          </a>
          <a routerLink="/register" (click)="closeDesktopDropdown()" class="block px-4 py-3 text-gray-700 hover:bg-gray-100">
            Konto erstellen
          </a>
        </div>
      }
    } @else {
      <button (click)="toggleDesktopDropdown()" class="p-1 px-4 rounded-3xl relative" style="z-index: 11;">
        <img src="/assets/images/ProfilePage.png" class="h-9 w-auto">
      </button>

      @if (showDesktopDropdown) {
        <div class="absolute right-0 top-full mt-2 w-64 bg-white rounded-lg shadow-lg border" style="z-index: 10000;">
          <!-- Volume-Regler im Dropdown -->
          <div class="px-4 py-3 border-b">
            <div class="flex items-center space-x-2">
              <img src="/assets/images/Volume.png" class="h-6 w-auto cursor-pointer" (click)="noSound()">
              <input type="range" id="volume" min="0" max="100" [(ngModel)]="volume"
                (input)="adjustVolume()"
                class="flex-1 h-2 rounded-full appearance-none cursor-pointer transition-all duration-200 bg-blue-300"/>
              <span class="text-sm text-gray-600 w-8">{{volume}}</span>
            </div>
          </div>
          <div class="px-4 py-3 border-b">
            <span class="text-sm text-gray-600">
              Rolle: {{ getRoleFromJwt() || 'Unbekannt' }}
            </span>
          </div>
          <a routerLink="/profile-page" (click)="closeDesktopDropdown()" class="block px-4 py-3 text-gray-700 hover:bg-gray-100">
            Profil
          </a>
        </div>
      }
    }
  </div>

  <!-- Mobile Layout - Nur Benutzerprofil mit Dropdown -->
  <div class="md:hidden relative mr-2">
    <button (click)="toggleMobileDropdown()" class="p-2 rounded-full relative" style="z-index: 11;">
      <img src="/assets/images/ProfilePage.png" class="h-8 w-auto">
    </button>

    @if (showMobileDropdown) {
      <div class="absolute right-0 top-full mt-2 w-64 bg-white rounded-lg shadow-lg border mobile-dropdown" style="z-index: 10000;">
        <!-- Volume-Regler im Mobile Dropdown -->
        <div class="px-4 py-3 border-b">
          <div class="flex items-center space-x-2">
            <img src="/assets/images/Volume.png" class="h-6 w-auto cursor-pointer" (click)="noSound()">
            <input type="range" id="volume-mobile" min="0" max="100" [(ngModel)]="volume"
              (input)="adjustVolume()"
              class="flex-1 h-2 rounded-full appearance-none cursor-pointer transition-all duration-200 bg-blue-300"/>
            <span class="text-sm text-gray-600 w-8">{{volume}}</span>
          </div>
        </div>
        @if (!isLoggedIn()) {
          <a routerLink="/login" (click)="closeMobileDropdown()" class="block px-4 py-3 text-gray-700 hover:bg-gray-100 border-b">
            Anmelden
          </a>
          <a routerLink="/register" (click)="closeMobileDropdown()" class="block px-4 py-3 text-gray-700 hover:bg-gray-100">
            Konto erstellen
          </a>
        } @else {
          <div class="px-4 py-3 border-b">
            <span class="text-sm text-gray-600">
              Rolle: {{ getRoleFromJwt() || 'Unbekannt' }}
            </span>
          </div>
          <a routerLink="/profile-page" (click)="closeMobileDropdown()" class="block px-4 py-3 text-gray-700 hover:bg-gray-100">
            Profil
          </a>
        }
      </div>
    }
  </div>
</div>

<router-outlet />
