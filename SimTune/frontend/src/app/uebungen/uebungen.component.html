<div class="flex text-sm sm:text-lg md:text-xl lg:text-2xl ml-4 sm:ml-8 md:ml-16 lg:ml-32 mt-6 sm:mt-8 md:mt-10 lg:mt-12 px-4">
  <p class="text-gray-400 break-words">
    <ng-container *ngFor="let breadcrumb of breadcrumb_elements(); let last = last">
      <ng-container *ngIf="!last">
        <a [routerLink]="breadcrumb.url" class="hover:text-gray-600 transition-colors">
          {{ breadcrumb.label }}
        </a>
        <span class="mx-1"> → </span>
      </ng-container>
      <ng-container *ngIf="last">
        <a [routerLink]="breadcrumb.url" class="font-semibold text-black hover:text-gray-800 transition-colors">
          {{ breadcrumb.label }}
        </a>
      </ng-container>
    </ng-container>
  </p>
</div>

@if (taskType() != '') {
  <div id="container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-y-6 sm:gap-y-8 md:gap-y-10 gap-x-6 sm:gap-x-8 md:gap-x-12 p-4 sm:p-6 mt-4 sm:mt-6 mx-4 sm:mx-8 md:mx-16 lg:mx-24 xl:mx-36">

    <button
      *ngFor="let item of texts"
      (click)="goToTask(item.description)"
      [ngClass]="[
        item.done
          ? 'bg-gradient-to-br from-costumMediumGreen to-costumGreen'
          : 'bg-gradient-to-br from-mediumDarkBlue to-costumBlue',
        'group relative w-full rounded-2xl border border-black/10',
        'text-center py-6 sm:py-7 md:py-8 shadow-md hover:shadow-xl transition-all duration-300 cursor-pointer select-none',
        'backdrop-blur-sm hover:-translate-y-0.5 flex flex-col'
      ]"
    >
      <div class="flex-1 flex items-center justify-center px-3 sm:px-4 md:px-6">
        <p class="text-center font-bold text-lg sm:text-xl md:text-2xl leading-snug text-white/95 drop-shadow text-balance">
          {{ item.description }}
        </p>
      </div>

      <div class="mt-auto pt-2 sm:pt-3 text-white/95 px-2">
        <div class="relative flex flex-wrap items-center justify-center gap-x-2 sm:gap-x-3 gap-y-1.5 sm:gap-y-2 relative">
          <span class="rounded-full px-2 sm:px-2.5 py-0.5 text-xs bg-black/15 backdrop-blur-sm">
            {{ item.exerciseModus }}
          </span>
          <span class="opacity-60 hidden sm:inline">•</span>
          <span class="rounded-full px-2 sm:px-2.5 py-0.5 text-xs bg-black/15 backdrop-blur-sm">
            {{ item.exerciseContents?.length * 2 || 0 }} Aufgaben
          </span>
          <span class="opacity-60 hidden sm:inline">•</span>
          <span class="rounded-full px-2 sm:px-2.5 py-0.5 text-xs bg-black/10 backdrop-blur-sm">
            {{ item.notationType }}
          </span>
        </div>

        @if(item.done) {
          <div class="flex justify-center">
            <span class="absolute px-10 py-1 text-xs font-normal">
              Bester Versuch: <span class="font-semibold">{{ item.highestScore }}</span>
            </span>
          </div>
        }
      </div>
    </button>
  </div>
}
@else {
  @for (group of content()?.groups; track group['group-header']) {
    <h2 class="text-xl sm:text-2xl md:text-3xl font-bold mt-3 md:mt-5 text-center px-4">{{ group["group-header"] }}</h2>

    <div class="mt-8 md:mt-14 text-center grid grid-cols-1 lg:grid-cols-2 gap-y-8 md:gap-y-16 gap-x-0 place-items-center w-full lg:w-2/3 mx-auto px-4">
      @for (card of group['cards']; track card['card-header'];) {
        <a [routerLink]="card['card-url']" class="block w-80 sm:w-96 rounded-3xl bg-white border-2 border-black shadow-xl transition-all duration-300 transform hover:shadow-2xl hover:-translate-y-1">
          <div class="h-48 sm:h-56 flex flex-col justify-between">
            <div class="flex items-center justify-center pt-6 sm:pt-8 px-4 sm:px-6 relative">
              <div class="flex items-center justify-center gap-3">
                <img
                  *ngIf="card['card-header-image-url'] && card['card-header-image-url'] !== ''"
                  [src]="card['card-header-image-url']"
                  class="flex items-center justify-center h-6 sm:h-7 w-auto object-contain opacity-90"
                />
                <p class="font-bold text-xl sm:text-2xl md:text-3xl text-black text-center w-full">
                  {{ card["card-header"] }}
                </p>
              </div>
            </div>
            <img [src]="card['card-image-url']" class="object-contain px-4 sm:px-6 rounded-b-3xl mb-6 sm:mb-8 transition-transform duration-300 h-20 sm:h-24" />
          </div>
        </a>
      }
    </div>
  }
}
